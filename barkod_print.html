<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Barkod Yazdır</title>

<style>
  body {
    margin: 0;
    padding: 0;
    text-align: center;
    overflow: hidden;
  }

  /* PNG kırpılmış görüntü alanı */
  #cropArea {
    width: 350px;       /* termal için ideal görünüm */
    height: 350px;      /* kare alan */
    margin: 20px auto;
    background-repeat: no-repeat;
    background-size: cover;   /* ölçeklemeden tam kare doldurur */
    background-position: center; /* PNG'nin sadece ortasındaki barkod çıkar */
  }

  @media print {
    body {
      margin: 0;
      padding: 0;
    }
    #cropArea {
      width: 300px;
      height: 300px;
      page-break-after: avoid;
    }
  }
</style>

</head>
<body>

<div id="cropArea"></div>

<script>
  window.showBarcode = function(base64){
    const url = "data:image/png;base64," + base64;
    document.getElementById("cropArea").style.backgroundImage = `url(${url})`;

    setTimeout(() => {
      window.print();

      // 2. boş sayfa oluşmasın → biraz geç kapatıyoruz
      setTimeout(() => window.close(), 600);
    }, 300);
  };
</script>

</body>
</html>
